<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>È≥êÈ≠üÈ≤ºÂàÜËæ®Â§ßÊåëÊàò</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @keyframes float {
            0% {
                transform: translateY(0px) rotate(0deg);
            }

            50% {
                transform: translateY(-15px) rotate(1deg);
            }

            100% {
                transform: translateY(0px) rotate(0deg);
            }
        }

        @keyframes bounce-custom {

            0%,
            100% {
                transform: translateY(-25%) scale(1.1);
                animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
            }

            50% {
                transform: translateY(0) scale(1.1);
                animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
            }
        }
    </style>
</head>

<body class="bg-sky-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useMemo } = React;

        // --- 0. ÂõæÊ†áÁªÑ‰ª∂ (Êõø‰ª£ lucide-react ‰ª•ÂáèÂ∞ë‰æùËµñ) ---

        const IconCheck = ({ className, size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"></polyline></svg>
        );

        const IconX = ({ className, size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        );

        const IconFlame = ({ className, size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.1.2-2.2.5-3.3a9 9 0 0 0 2.5 2.8z"></path></svg>
        );

        const IconRotateCcw = ({ className, size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path></svg>
        );

        // --- 1. Êï∞ÊçÆ ---

        const SPECIES_DATA = {
            skate: {
                id: 'skate',
                name: 'È≥ê (Skate)',
                simpleName: 'È≥ê',
                desc: 'ÁâπÂæÅÔºöË∫´‰ΩìÈÄöÂ∏∏ÂëàËè±ÂΩ¢ÊàñÂøÉÂΩ¢„ÄÇÂ∞æÂ∑¥ËæÉÁ≤ó‰∏îÊúâËÇâÊÑüÔºåÊó†ÊØíÂà∫„ÄÇÊúÄÂÖ≥ÈîÆÁöÑÊòØÂ∞æÂ∑¥Â∞ñÁ´ØÈôÑËøëÈÄöÂ∏∏Êúâ‰∏§‰∏™Â∞èËÉåÈ≥ç„ÄÇ',
                colorBase: { h: 30, s: 40, l: 60 }, // Brown/Sandish
            },
            stingray: {
                id: 'stingray',
                name: 'È≠ü (Stingray)',
                simpleName: 'È≠ü',
                desc: 'ÁâπÂæÅÔºöË∫´‰ΩìÂëàÂúÜÂΩ¢ÊàñÂúÜÊ∂¶ÁöÑËè±ÂΩ¢„ÄÇÂ∞æÂ∑¥ÂÉèÈû≠Â≠ê‰∏ÄÊ†∑ÁªÜÈïøÔºåÈÄöÂ∏∏Êúâ‰∏ÄÊ†πÊØíÂà∫„ÄÇÊ≤°ÊúâËÉåÈ≥ç„ÄÇ',
                colorBase: { h: 200, s: 20, l: 50 }, // Greyish/Blue
            },
            eagleray: {
                id: 'eagleray',
                name: 'È≤º (Eagle Ray/Manta)',
                simpleName: 'È≤º',
                desc: 'ÁâπÂæÅÔºöÂ§¥ÂíåË∫´‰ΩìÂàÜÁïåÊòéÊòæÔºàÊúâÂ§¥È≥çÔºâ„ÄÇËÉ∏È≥çÂÉèÂ∑®Â§ßÁöÑÁøÖËÜÄ„ÄÇÈÄöÂ∏∏Âú®Ê∞¥‰∏≠‚ÄúÈ£ûË°å‚ÄùËÄå‰∏çÊòØË∂¥Âú®Êµ∑Â∫ï„ÄÇ',
                colorBase: { h: 220, s: 60, l: 30 }, // Deep Blue/Black
            }
        };

        const SPECIES_IMAGES = {
            skate: ['skate_1.jpg', 'skate_2.jpg', 'skate_3.jpg', 'skate_4.jpg', 'skate_5.jpg', 'skate_6.jpg'],
            stingray: ['stingray_1.jpg', 'stingray_2.jpg', 'stingray_3.jpg', 'stingray_4.jpg', 'stingray_5.jpg', 'stingray_6.jpg'],
            eagleray: ['eagle_ray_1.jpg', 'eagle_ray_2.jpg', 'eagle_ray_3.jpg', 'eagle_ray_4.jpg', 'eagle_ray_5.jpg', 'eagle_ray_6.jpg']
        };


        // --- 3. Ê∏∏ÊàèÈÄªËæëÁªÑ‰ª∂ ---

        const ZhengBangModal = ({ show }) => {
            if (!show) return null;
            return (
                <div className="fixed inset-0 flex items-center justify-center z-50 pointer-events-none">
                    <div className="bg-white border-b-8 border-yellow-400 rounded-3xl p-8 shadow-2xl transform flex flex-col items-center z-50" style={{ animation: 'bounce-custom 1s infinite' }}>
                        <div className="text-7xl mb-4 animate-pulse">üåü</div>
                        <div className="text-4xl font-black text-yellow-600 tracking-wider">Ëí∏ ËöåÔºÅ</div>
                        <div className="text-lg text-gray-400 font-bold mt-2">ZHEN BANG!</div>
                    </div>
                </div>
            );
        };

        function App() {
            const [currentQuestion, setCurrentQuestion] = useState(null);
            const [selectedOption, setSelectedOption] = useState(null);
            const [gameState, setGameState] = useState('playing');
            const [streak, setStreak] = useState(0);
            const [showZhengBang, setShowZhengBang] = useState(false);
            const [stats, setStats] = useState({ correct: 0, total: 0 });

            const generateQuestion = useCallback(() => {
                const keys = Object.keys(SPECIES_DATA);
                const randomKey = keys[Math.floor(Math.random() * keys.length)];
                const species = SPECIES_DATA[randomKey];
                const images = SPECIES_IMAGES[randomKey];
                const randomImage = images[Math.floor(Math.random() * images.length)];

                const seed = Math.random() * 10000;

                setCurrentQuestion({
                    correctId: species.id,
                    seed: seed,
                    correctSpecies: species,
                    imagePath: `./images/${randomImage}`
                });
                setSelectedOption(null);
                setGameState('playing');
                setShowZhengBang(false);
            }, []);

            useEffect(() => {
                generateQuestion();
            }, [generateQuestion]);

            const handleSelect = (id) => {
                if (gameState !== 'playing') return;

                setSelectedOption(id);
                const isCorrect = id === currentQuestion.correctId;

                setStats(prev => ({ correct: prev.correct + (isCorrect ? 1 : 0), total: prev.total + 1 }));

                if (isCorrect) {
                    setGameState('correct');
                    setStreak(s => s + 1);
                    setShowZhengBang(true);
                    setTimeout(() => setShowZhengBang(false), 2000);
                } else {
                    setGameState('wrong');
                    setStreak(0);
                }
            };

            const getButtonStyle = (id) => {
                const baseStyle = "w-full p-4 rounded-2xl border-2 border-b-4 font-bold text-lg transition-all active:border-b-2 active:translate-y-0.5 mb-3 flex items-center justify-between cursor-pointer";

                if (gameState === 'playing') {
                    return `${baseStyle} bg-white border-gray-200 text-gray-700 hover:bg-gray-50 active:bg-gray-100`;
                }
                if (id === currentQuestion.correctId) {
                    return `${baseStyle} bg-green-100 border-green-500 text-green-700`;
                }
                if (id === selectedOption && gameState === 'wrong') {
                    return `${baseStyle} bg-red-100 border-red-500 text-red-700`;
                }
                return `${baseStyle} bg-white border-gray-100 text-gray-300 opacity-60`;
            };

            if (!currentQuestion) return null;

            return (
                <div className="min-h-screen font-sans max-w-md mx-auto border-x border-gray-200 shadow-2xl flex flex-col relative overflow-hidden bg-sky-50">

                    {/* Ocean Background Decor */}
                    <div className="absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-sky-200 to-sky-50 -z-10 rounded-b-[3rem]"></div>

                    {/* Header */}
                    <header className="px-4 py-4 flex items-center justify-between z-10">
                        <div className="flex items-center space-x-2">
                            <span className="text-xl font-black text-sky-900 tracking-tighter">È≥êÈ≠üÈ≤ºÂàÜËæ®Âô®</span>
                        </div>

                        <div className="flex items-center space-x-4">
                            {streak > 0 && (
                                <div className="flex items-center" style={{ animation: 'bounce 1s infinite' }}>
                                    <IconFlame className="text-orange-500 fill-orange-500" size={20} />
                                    <span className="text-orange-600 font-black ml-1 text-lg">{streak}</span>
                                </div>
                            )}
                            <div className="flex items-center text-sky-700 font-bold bg-white/50 px-3 py-1 rounded-full backdrop-blur-sm">
                                <IconCheck className="mr-1 w-4 h-4" />
                                {stats.correct}
                            </div>
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="flex-1 p-6 flex flex-col items-center">

                        <h2 className="text-lg font-bold text-sky-800 mb-2 text-center opacity-80">
                            ËßÇÂØü‰ΩìÂûãÂíåÂ∞æÂ∑¥...
                        </h2>

                        <div className="w-full flex justify-center mb-6">
                            <div className="relative bg-white/40 backdrop-blur-md rounded-[2rem] shadow-lg border-2 border-white/50 overflow-hidden ring-4 ring-sky-100/50">
                                <div className="p-2">
                                    <img
                                        src={currentQuestion.imagePath}
                                        alt="Ray Species"
                                        className="max-w-full max-h-[50vh] w-auto h-auto object-contain rounded-[1.5rem] shadow-sm transform hover:scale-105 transition-transform duration-500 block"
                                    />
                                </div>
                            </div>
                        </div>

                        {/* Options */}
                        <div className="w-full space-y-2 flex-1">
                            {Object.values(SPECIES_DATA).map((species) => (
                                <button
                                    key={species.id}
                                    onClick={() => handleSelect(species.id)}
                                    disabled={gameState !== 'playing'}
                                    className={getButtonStyle(species.id)}
                                >
                                    <span>{species.simpleName}</span>
                                    {gameState !== 'playing' && species.id === currentQuestion.correctId && <IconCheck className="text-green-600 w-6 h-6" />}
                                    {gameState !== 'playing' && species.id === selectedOption && selectedOption !== currentQuestion.correctId && <IconX className="text-red-600 w-6 h-6" />}
                                </button>
                            ))}
                        </div>
                    </main>

                    {/* Feedback Sheet */}
                    <div
                        className={`fixed bottom-0 left-0 right-0 max-w-md mx-auto transition-transform duration-500 transform z-40 ${gameState === 'playing' ? 'translate-y-[110%]' : 'translate-y-0'
                            }`}
                        style={{ transitionTimingFunction: 'cubic-bezier(0.34, 1.56, 0.64, 1)' }}
                    >
                        <div className={`p-6 pb-10 rounded-t-3xl shadow-[0_-10px_40px_rgba(0,0,0,0.1)] ${gameState === 'correct'
                            ? 'bg-green-50 border-t-2 border-green-200'
                            : 'bg-red-50 border-t-2 border-red-200'
                            }`}>
                            <div className="flex flex-col mb-4">
                                <div className="flex items-center mb-2">
                                    <div className={`font-black text-2xl mr-2 ${gameState === 'correct' ? 'text-green-600' : 'text-red-600'
                                        }`}>
                                        {gameState === 'correct' ? 'ÂõûÁ≠îÊ≠£Á°ÆÔºÅ' : 'ÂæàÈÅóÊÜæÔºÅ'}
                                    </div>
                                </div>

                                <p className="text-gray-700 font-medium leading-relaxed bg-white/60 p-4 rounded-2xl border border-black/5 text-sm">
                                    <span className="font-bold text-gray-900 block mb-1 text-lg">{currentQuestion.correctSpecies.name}</span>
                                    {currentQuestion.correctSpecies.desc}
                                </p>
                            </div>

                            <button
                                onClick={generateQuestion}
                                className={`w-full py-4 rounded-xl font-black text-white text-lg tracking-wide shadow-lg transform transition active:scale-[0.98] flex items-center justify-center ${gameState === 'correct'
                                    ? 'bg-green-500 hover:bg-green-600 shadow-green-200'
                                    : 'bg-red-500 hover:bg-red-600 shadow-red-200'
                                    }`}
                            >
                                ‰∏ã‰∏ÄÈ¢ò <IconRotateCcw className="ml-2 w-5 h-5" />
                            </button>
                        </div>
                    </div>

                    <ZhengBangModal show={showZhengBang} />
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>